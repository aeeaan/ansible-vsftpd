---
- name: install vsftpd
  yum: name=vsftpd state=installed
  tags:
    - vsftpd
    - packages

- name: configure vsftpd
  template: src="{{ item }}.j2" dest="/etc/vsftpd/{{ item }}" owner=root group=root mode=0600
  with_items:
    - ftpusers
    - user_list
    - vsftpd.conf
  notify: restart vsftpd
  tags:
    - vsftpd
    - configuration

- name: ensure vsftp service is enabled and running
  service: name=vsftpd enabled=yes state=started
  tags:
    - vsftpd
    - configuration
    - services
